<!DOCTYPE html>
<html>
  <head>
    <title>SVG Rect</title>
  </head>
  <body>
    <style>
      body {
        font: 10px sans-serif;
      }

      .axis path,
      .axis line {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
      }
    </style>
    <div id="bar"></div>
    <script data-main="../../src/require.config.js"
            src="../../../node_modules/requirejs/require.js"></script>
    <script>
      require(["../../src/index"], function (jubilee) {
        var data = [
          [
            { x: "apple", y: 41, label: "a" },
            { x: "banana", y: 7, label: "b" },
            { x: "cranberry", y: 117, label: "c" }
          ],
          [
            { x: "apple", y: 18, label: "d" },
            { x: "banana", y: 51, label: "d" },
            { x: "cranberry", y: 122, label: "f" }
          ],
          [
            { x: "apple", y: 22, label: "g" },
            { x: "banana", y: 7, label: "h" },
            { x: "cranberry", y: 117, label: "i" }
          ]
        ];
//          [
//            { x: "apple", y: 41, label: "a" },
//            { x: "apple", y: 18, label: "a" },
//            { x: "apple", y: 22, label: "a" },
//            { x: "apple", y: 17, label: "a" },
//            { x: "apple", y: 17, label: "a" }
//          ],
//          [
//            { x: "banana", y: 51, label: "b" },
//            { x: "banana", y: 8, label: "b" },
//            { x: "banana", y: 42, label: "b" },
//            { x: "banana", y: 7, label: "b" },
//            { x: "banana", y: 7, label: "b" }
//          ],
//          [
//            { x: "cranberry", y: 141, label: "c" },
//            { x: "cranberry", y: 118, label: "c" },
//            { x: "cranberry", y: 122, label: "c" },
//            { x: "cranberry", y: 117, label: "c" },
//            { x: "cranberry", y: 117, label: "c" }
//          ]
//        ];

        var color = d3.scale.category10();
        var bar = jubilee.chart.bar()
          .width(760)
          .height(500)
          .xScale({
            scale: d3.scale.linear(),
            domain: d3.max(d3.merge(data), function (d) {
              return d.y0 + d.y;
            }),
            nice: true
          })
          .yScale({
            scale: d3.scale.ordinal(),
            domain: ["apple", "banana", "cranberry"]
          })
          .group(false)
          .rect({
            fill: function (d) { return color(d.label); },
            stroke: function (d) { return color(d.label); }
          })
          .on("brush", function (brush) { console.log(brush.extent()); });

        d3.select("#bar")
          .datum(data)
          .call(bar);
      });
    </script>
  </body>
</html>
